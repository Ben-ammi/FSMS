<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Tanks</title>
    <!-- favicon for this website-->
    <link rel="icon" type="image/x-icon" href="/src/FSMS/FSMS/Views/img/favicon_io/favicon-16x16.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous">
    <link rel="stylesheet" href="tank.css">


    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>
<body>
<h1>Fuel Tanks in this page it should show the tank capacity and fuel type where as there should be
    an option to add a new tank and added tank should show various information on a card
</h1>

<div class="container mt-5">
    <h1 class="mb-4">Fuel Tanks</h1>
    <!-- Display Fuel Tanks -->
    <div id="fuelTankContainer" class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
        <!-- Fuel Tank Card -->
        <div class="col">
            <div class="card">
                <div class="card-body">
                    <canvas id="tank1-chart"></canvas>
                    <h5 class="card-title">Tank 1</h5>
                    <p class="card-text">ID: 1</p>
                    <p class="card-text">Capacity: 1000 liters</p>
                    <p class="card-text">Fuel Type: Diesel</p>
                    <p class="card-text">Fuel Available: 800 liters</p>
                    <p class="card-text">Humidity: 60%</p>
                    <p class="card-text">Temperature: 25°C</p>
                </div>
            </div>
        </div>
        <!-- Add New Tank Button -->
        <div class="col">
            <div class="card h-100">
                <div class="card-body d-flex justify-content-center align-items-center">
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addTankModal">Add New
                        Tank
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Add Tank Modal -->
<div class="modal fade" id="addTankModal" tabindex="-1" aria-labelledby="addTankModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addTankModalLabel">Add New Tank</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Tank Form -->
                <form>
                    <div class="mb-3">
                        <label for="tankID" class="form-label">ID</label>
                        <input type="text" class="form-control" id="tankID" required>
                    </div>
                    <div class="mb-3">
                        <label for="tankCapacity" class="form-label">Tank Capacity (liters)</label>
                        <input type="number" class="form-control" id="tankCapacity" required>
                    </div>
                    <div class="mb-3">
                        <label for="fuelType" class="form-label">Fuel Type</label>
                        <select class="form-select" id="fuelType" required>
                            <option selected disabled>Select Fuel Type</option>
                            <option value="petrol">Petrol</option>
                            <option value="diesel">Diesel</option>
                            <option value="kerosene">Kerosene</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="humidity" class="form-label">Humidity</label>
                        <input type="text" class="form-control" id="humidity" required>
                    </div>
                    <div class="mb-3">
                        <label for="temperature" class="form-label">Temperature (°C)</label>
                        <input type="number" class="form-control" id="temperature" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Add Tank</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    // Mock data for demonstration
    const mockSensorData = [
        {tankName: 'Tank 1', tankID: '001', tankCapacity: 1000, fuelType: 'Petrol', fuelAvailable: 800, humidity: 45, temperature: 25},
        {tankName: 'Tank 2', tankID: '002', tankCapacity: 1500, fuelType: 'Diesel', fuelAvailable: 1200, humidity: 50, temperature: 23},
        {tankName: 'Tank 3', tankID: '003', tankCapacity: 2000, fuelType: 'Gasoline', fuelAvailable: 1800, humidity: 55, temperature: 27}
    ];

    // Function to update fuel tank cards with mock sensor data and display a chart
    function updateFuelTanks() {
        mockSensorData.forEach(data => {
            const tankCard = document.createElement('div');
            tankCard.classList.add('col');
            tankCard.innerHTML = `
                <div class="card">
                    <div class="card-body">
                        <canvas id="${data.tankID}-chart"></canvas>
                        <h5 class="card-title">${data.tankName}</h5>
                        <p class="card-text">ID: ${data.tankID}</p>
                        <p class="card-text">Capacity: ${data.tankCapacity} liters</p>
                        <p class="card-text">Fuel Type: ${data.fuelType}</p>
                        <p class="card-text">Fuel Available: ${data.fuelAvailable} liters</p>
                        <p class="card-text">Humidity: ${data.humidity}%</p>
                        <p class="card-text">Temperature: ${data.temperature}°C</p>
                    </div>
                </div>
            `;
            document.getElementById('fuelTankContainer').appendChild(tankCard);

            // Chart creation
            const ctx = document.getElementById(`${data.tankID}-chart`).getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Fuel Available'],
                    datasets: [{
                        label: 'Liters',
                        data: [data.fuelAvailable],
                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        });
    }

    // Call the updateFuelTanks function when the page loads
    window.addEventListener('load', updateFuelTanks);
</script>

</body>
</html>
